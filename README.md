# Angular Getting Started - Practice

This repository contains a basic empty Angular application to build upon.

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [What's in there?](#whats-in-there)
- [Installation](#installation)
- [Starting the app](#starting-the-app)
- [Backend API](#backend-api)
- [Instructions](#instructions)
  - [Hints & Tips](#hints--tips)
    - [Get the data](#get-the-data)
    - [Create a component for the messages](#create-a-component-for-the-messages)
    - [Manage message deletion](#manage-message-deletion)
    - [Add new messages](#add-new-messages)
    - [Add alignment options](#add-alignment-options)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## What's in there?

The application is pretty much a barebone application like the ones generated by the [Angular CLI](https://github.com/angular/angular-cli). Some minor modifications has been done:

- Replaced the content of the [`src/app/app.component.html`](./src/app/app.component.html) file with the content between the `<body>` tag of [this file](https://gist.githubusercontent.com/Tazaf/2ca35d60688eec1281fd9546abe1f76a/raw/a43bd8d5b24f8854d7d435131b07ba29d54b92cd).
- Changed the `title` property of the `AppComponent` value to `DiaLog`, and interpolated this variable in [`src/app/app.component.html`](./src/app/app.component.html) at line 4.
- Created a `server` directory with a minimal Express application, to use as a sample backend (see [Backend API](#backend-api))
- Created new `npm` scripts: `server` and `dev` (see [Starting the app](#starting-the-app))

## Installation

1. Clone this repository somewhere in your filesystem:

   ```bash
   $> git clone https://github.com/Tazaf/masrad-dfa-angular-starter-practice.git angular-practice
   ```

1. Move in the cloned directory

   ```bash
   $> cd angular-practice
   ```

1. Install npm dependencies

   ```bash
   $> npm install
   ```

## Starting the app

To start the app, you can run this command:

```
$> npm run dev
```

This will start the sample backend, and setup `ng serve` to compile, serve and watch your Angular application.

If you want to launch the server and `ng serve` separately, use:

- `npm run server` to start the sample backend
- `npm start` to start `ng serve`

> You'll need to open two terminals

## Backend API

There's a very lightweight backend embedded in this project, whose documentation can be found [here](./server/API.md)

## Instructions

The goal of this exercise is to implement features related to managing messages in a DiaLog conversation. That is:

- Get messages for a conversation from the backend and display them correctly
- Remove a message from the current conversation (only in the frontend)
- Add alignment button behavior
- Add a new message to the conversation (only in the frontend)
- Add validation to the new message form

### Hints & Tips

Here's a breakdown of how you should approach this exercise.

#### Get the data

First, concentrate on getting the data from the server.

- Based on the [API documentation](./server/API.md), create a model for the messages.

- Since the app starts with the second conversation selected (this is hardcoded in the HTML), you will want to request **the messages for this conversation** (`id`: 2) from the backend right when the application starts.

  You should create a service that will handle backend communication for conversations and messages.

  > Use the `ng generate` command to create a new blank service

  Inject a dependency to the `HttpClient` in the service, since it will be performing HTTP requests (don't forget to import the `HttpClientModule` un your `AppModule`!)

  > Remember that the `HttpClient` uses `Observables` to manage asynchronous operations.

  Create a method in this service to retrieve from the backend the list of messages for a specific conversation.

- Inject this service as a dependency in `app.component.ts` and use it to retrieve the messages when the app starts.
- Update the content of the `app.component.html` file, specifically the `<div class="card-bory">` so that messages are displayed using `*ngFor` instead of duplicating the markup for each message.

#### Create a component for the messages

For better structure, maintenability, and sepration of concern, you should create an Angular Component to display your messages.

> Use the `ng generate` command to create the new Component.

- This component's template should contains only the markup related to **one** message.
- The component's class should require an input, which would be the message to display.
- Update the markup so that this message's properties are interpolated in the template.
- Include this component in `app.component.html` template so that it is rendered for each of the conversation's message, in lieu of the preivous markup
  > Of course, the page should look exactly the same as before

#### Manage message deletion

Now that you have a dedicated component for each message, add the deletion feature.

- The collection of messages is managed by the `AppComponent` class, but the button that deletes a message is located in the `MessageComponent`'s template.

  **How can you make the `MessageComponent` notify the `AppComponent` when the user clicks on the delete button?**

- Add an `@Output` properties in the `MessageComponent` that will emit when the user clicks on this component's delete button.
- Update the `app.component.html` template so that `AppComponent` listens to the `MessageComponent`'s `@Output` property
- To delete a message, simply remove it's object from the Message collection in `AppComponent` ; Angular will propagate this deletion to the page's DOM.

**Bonus:** Display "This conversation is empty" when the conversation does not have any message.

#### Add new messages

This feature will require you to work with Angular Forms.

> Don't forget to import the corresponding module in `AppModule`, depending on the type of Forms you want to use:
>
> - for Reactive Forms, import `ReactiveFormsModule`
> - for Template Driven Forms, import `FormsModule`

- Prevent the form to be submitted if the textarea is empty by either:

  - Disabling the "Send" button while the textarea is empty **OR**
  - Display an error message under the textarea if the user clicks on "Send" while the textarea is empty
    > Don't forget that Angular provides you with many utility to check the validity of a form or one of its controls

- When the form is valid, create a new `Message` object, and set all its properties appropriately
- Add it to the conversation by pushing it in the messages collection
- Reset the form so the user could send a new message right away

#### Add alignment options

To manage the alignment, create a new variable in the `AppComponent` (or use an existing properties, like a `Message`'s `alignment`), and type it so it can only take three values: `left`, `center` and `right`.

Then, use this variable in the templates where alignment should be applied (interpolate it in the `class` property of an HTML tag, for example), and to apply the `active` class to the appropriate alignment button.

Each alignment button should then change the value of this state variable.

> Don't forget to apply the selected alignment value in the `alignment` property of a `Message` when adding it to the conversation

### Bonus

If you feel like it, keep breaking down the `app.component.html` to create dedicated components:

- `NavbarComponent` for the sticky navigation bar
- `DialogsListComponent` for the left-side list of conversations
- `DialogComponent` for the actual conversation section

> This is a recommanded approach as it allows a more modular application that enforces small, straighforward components, easier to maintain, share and reuse.
